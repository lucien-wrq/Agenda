<?php

// Récupérer les données du formulaire HTML
$label = isset($_POST['label']) ? $_POST['label'] : '';
$description = isset($_POST['description']) ? $_POST['description'] : '';

date_default_timezone_set('Europe/Paris');
$creation_date = date('Y-m-d H:i:s');
$id_team = uniqid();


try {
    $db = new PDO('sqlite:BDD2.db');
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Set error mode to exception
} catch (PDOException $e) {
    die("Erreur de connexion : " . $e->getMessage());
}

// Préparer la requête SQL
$sql_1 = "INSERT INTO teams (id_team, label, creation_date ,description) VALUES (:id_team, :label, :creation_date, :description)";
// Préparer la requête SQL avec PDO
$stmt_1 = $db->prepare($sql_1);

// Binder les paramètres
$stmt_1->bindParam(':label', $label, PDO::PARAM_STR);
$stmt_1->bindParam(':creation_date', $creation_date, PDO::PARAM_STR);
$stmt_1->bindParam(':description', $description, PDO::PARAM_STR);
$stmt_1->bindParam(':id_team', $id_team, PDO::PARAM_STR);
// Exécuter la requête
try {
    $stmt_1->execute();
    echo "Enregistrement réussi";
} catch (PDOException $e) {
    echo "Erreur : " . $e->getMessage();
}
// Fermer la connexion
$db = null;

?>